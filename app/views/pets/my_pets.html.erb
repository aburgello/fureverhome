<h1 class="text-center my-4" id="index-title">My Pets</h1>

<div class="container">
  <% if @pets.any? %>
    <ul class="list-group">
      <% @pets.each do |pet| %>
        <li id="<%= dom_id(pet) %>" class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <%= link_to pet.title, pet_path(pet), class: 'fw-bold' %> - <%= pet.breed %> - <%= pet.age %> years old - <%= pet.status %>
          </div>
          <div>
            <%= link_to 'Edit', edit_pet_path(pet), class: 'btn btn-warning btn-sm me-2' %>
            <%= link_to 'Delete', pet_path(pet), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %>
          </div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p class="text-center mt-3">You have not created any pet listings yet.</p>
  <% end %>

  <div class="text-center my-3">
    <%= link_to 'Create New Pet', new_pet_path, class: 'btn btn-primary me-2' %>
    <%= link_to 'Back to All Pets', pets_path, class: 'btn btn-secondary' %>
  </div>
</div>

<h1 class="text-center my-4" id="completed-requests-title">Completed Requests</h1>

<div class="container">
  <% if @completed_requests.present? %>
    <div class="row">
      <% @completed_requests.each do |adoption| %>
        <div id="<%= dom_id(adoption) %>" class="col-md-4 mb-4">
          <div class="card h-100 shadow-sm">
            <%= link_to adoption_messages_path(adoption), class: 'text-decoration-none text-dark' do %>
              <div class="card-header">
                <h5 class="card-title mb-0">
                  <%= adoption.status.capitalize %> Request for <%= adoption.pet.title %>
                </h5>
              </div>
              <div class="card-body">
                <p class="card-text"><strong>Email:</strong> <%= adoption.adopter_email %></p>
                <p class="card-text"><strong>Message:</strong> <%= adoption.message %></p>
                <p class="card-text"><strong>Status:</strong> <%= adoption.status.capitalize %></p>
              </div>
            <% end %>
            <div class="card-footer text-right">
              <%= link_to 'Delete', pet_adoption_path(adoption.pet, adoption), data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this completed request?' }, class: 'btn btn-danger btn-sm' %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="alert alert-info shadow-sm">
      <p>No completed requests yet!</p>
    </div>
  <% end %>
</div>

<style>
  .container {
    max-width: 1300px;
  }

  .card {
    border: 2px solid #d4d2bf;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    border-radius: 14px;
    max-height: 220px;
    display: flex;
    flex-direction: column;
  }

  .card-header:first-child {
    background-color: #f9f7f3;
    border-radius: 14px 14px 0 0;
  }

  .card-body {
    flex: 1;
  }

  .card-footer {
    background-color: #f9f7f3;
    border-radius: 0 0 14px 14px;
  }

  .btn {
    font-size: 1.1rem;
  }

  .alert {
    border-radius: 14px;
    padding: 20px;
    background-color: white;
    border: 2px solid #d4d2bf;
    transition: all 0.3s ease;
  }

  .alert:hover {
    border-color: rgb(228, 156, 62);
  }

  h5 {
    color: rgb(68, 57, 41);
  }

  h1 {
    font-size: 1.8rem;
  }
</style>
