<% if current_user.role == 'owner' %>
  <h1 class="text-center my-4" id="index-title">My Pets</h1>

  <div class="container">
    <% if @pets.any? %>
      <ul class="list-group">
        <% @pets.each do |pet| %>
          <li id="<%= dom_id(pet) %>" class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <%= link_to pet.title, pet_path(pet), class: 'fw-bold' %> - <%= pet.breed %> - <%= pet.age %> years old - <%= pet.status %>
            </div>
            <div>
              <%= link_to 'Edit', edit_pet_path(pet), class: 'furever-button' %>
              <%= link_to 'Delete', pet_path(pet), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, class: 'furever-button furever-button-delete' %>
            </div>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-center mt-3">You have not created any pet listings yet.</p>
    <% end %>

    <div class="text-center mt-5">
      <%= link_to 'Create New Pet', new_pet_path, class: 'furever-button bottom' %>
      <%= link_to 'Back to All Pets', pets_path, class: 'furever-button bottom' %>
    </div>
  </div>
<% end %>

<h1 class="text-center my-5" id="completed-requests-title">Completed Adoptions</h1>
<div class="container mb-3">
  <% if @completed_requests.present? %>
    <div class="row">
      <% @completed_requests.each do |adoption| %>
        <div id="<%= dom_id(adoption) %>" class="col-md-4 mb-4">
          <div class="card h-100 shadow-sm">
            <%= link_to adoption_messages_path(adoption), class: 'text-decoration-none text-dark' do %>
              <div class="card-header">
                <h5 class="card-title mb-0">
                  <%= adoption.status.capitalize %> Adoption for <%= adoption.pet.title %>
                </h5>
              </div>
              <div class="card-body">
                <p class="card-text"><strong>Email:</strong> <%= adoption.adopter_email %></p>
                <p class="card-text"><strong>Message:</strong> <%= adoption.message %></p>
                <p class="card-text"><strong>Status:</strong> <%= adoption.status.capitalize %></p>
              </div>
            <% end %>
            <% if current_user.role == 'owner' %>
              <div class="card-footer text-right">
                <%= link_to 'Delete', pet_adoption_path(adoption.pet, adoption), data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this completed request?' }, class: 'furever-button' %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="alert alert-info shadow-sm">
      <p>No completed requests yet!</p>
    </div>
  <% end %>
</div>




<style>
  h1 {
    font-family: 'Roboto Slab', serif;
    font-family: 'Roboto Slab', serif;
    font-weight: 700;
    font-size: 2.5rem;
    color: #323440;
  }
  .list-group{
  color: #323440;
  margin: auto;
  border-radius: 14px;
  max-width: 900px;
  margin-bottom: 20px;
 }

  .list-group-item{
    border: 2px solid #E5EEFF;
  }

  .container {
    max-width: 1300px;

  }


.card:hover{
  border-color: #323440;
}

.card-header {
  border-bottom: none;
}

.card-title {
  color: #323440;
  border-bottom: 2px solid #E5EEFF;
  padding-bottom: 5px;
}

.card-footer{
  background-color: white;
  border-top: 2px solid #E5EEFF;
}


.card-footer:last-child  {
    background-color: white;
    border-radius: 0 0 14px 14px ;
  }


.card-header:first-child  {
    background-color: white;
    border-radius: 14px;
  }


.card {
    border: 2px solid #E5EEFF;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    border-radius: 14px;
    transition: all 0.6s ease;
  }

  .btn {
    background-color: #323440;
  }

  .btn:hover {
    background-color: #fdcd07;
    color: #323440
  }

  .alert {
    border-radius: 14px;
    padding: 20px;
    background-color: white;
    border: 2px solid #E5EEFF;
    transition: all 0.3s ease;
  }
  .alert:hover {
    border-color: #fdcd07;

  }
 .furever-button-delete {
    font-size: 0.6rem;
    padding: 10px;
    background-color: #FC1B15;
  }
  .furever-button-delete:hover {
    background-color: grey;
    color: black;
  }
  .furever-button {
    font-size: 0.6rem;
    padding: 10px;
  }
  .bottom {
    font-size: 0.8rem;
    padding: 20px;
  }
  h5 {
    color: rgb(68, 57, 41);
  }
  </style>
